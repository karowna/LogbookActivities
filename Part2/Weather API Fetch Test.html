<!DOCTYPE html> <!-- Declares the type of document and version of HTML -->
<!-- Bilal Karowna -->
<!-- saved from url=(0166)https://my.bucks.ac.uk/bbcswebdav/pid-13884920-dt-content-rid-37702453_1/courses/COM5041-24SPSDL/COM5041-24SPSDL_ImportedContent_20250612080302/weather-js%283%29.html -->
<html xmlns="http://www.w3.org/1999/xhtml"> <!-- Auto-generated text by a browser or editor, showing where the file was saved from. -->
  <head> <!-- Contains metadata, shown below. sets character encoding-->
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <title>Weather API Fetch Test</title> <!-- Title of the document, displayed in the browser tab -->
</head> <!-- Closing the head tag -->
<body> <!-- Body of the document, where content is displayed -->
  <div> <!-- Main content area -->
    <input type="text" id="weather-town"> <!-- Input field for user to enter a town name -->
    <button onclick="searchWeather()">Search</button> <!-- Button to trigger the searchWeather function when clicked -->
    <br><br> <!-- Line breaks for spacing -->
    The current weather is: <span id="results"></span> <!-- Span to display the results of the weather search -->
  </div> <!-- Closing the div tag -->

  <!-- JavaScript code to handle the weather API fetch -->
  <script type="text/javascript"> 
    const APIKey = 'ab2c9d8ba56c7e1446bf3bfbcdcea5b1' // API key for OpenWeatherMap API, shouldn't really be hardcoded in production code
    async function searchWeather() { // Asynchronous function to fetch weather data
      try { // Try block to handle potential errors during the fetch operation
        // Get the town name from the input field and fetch weather data from OpenWeatherMap API
        // The API URL includes the town name and the API key
        // The response is then converted to JSON format
        // The weather data is extracted and displayed in the results span

        const town = document.getElementById('weather-town').value;
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${town}&appid=${APIKey}`);
        const responseData = await response.json();
        const weather = responseData.weather[0]
        document.getElementById('results').textContent = `${weather.main} (${weather.description})`;
      } catch (error) {
        console.error('Error fetching weather:', error); // Log any errors that occur during the fetch operation
      } // End of try-catch block
    }
  </script> <!-- Closing the script tag -->


</body></html> <!-- Closing the body tag and the html tag -->